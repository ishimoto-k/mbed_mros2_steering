http://os.mbed.com/users/smoritaemb/code/mbed-mros2/#c80f65422d991e8149d5964eaf7b003bbac651ca